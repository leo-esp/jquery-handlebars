(function(e){"use strict";function t(e,t,a){return e=e.replace(/[(^\s)(\s$)]/g,""),e.length?e+"/"+t+"."+a:t+"."+a}function a(e){return t(i.templatePath,e,i.templateExtension)}function r(e){return t(i.partialPath,e,i.partialExtension)}function n(t,a){e.get(r(t),function(e){Handlebars.registerPartial(a,e)},"text")}var l={},s={templatePath:"",templateExtension:"handlebars",partialPath:"",partialExtension:"partial",sync:!1},i=e.extend({},s);e.handlebars=function(){if("string"!=typeof arguments[0]){var t=arguments[0];if(i=e.extend(s,t),i.templatePath=i.templatePath.replace(/\\\/$/,""),i.partialPath=i.partialPath.replace(/\\\/$/,""),t.hasOwnProperty("partials")){var a;a="string"!=typeof t.partials?t.partials:t.partials.split(/\s+/g);for(var r=0;r<a.length;r++)n(a[r],a[r])}}else switch(arguments[0]){case"partial":arguments.length<3?n(arguments[1],arguments[1]):n(arguments[1],arguments[2]);break;case"helper":Handlebars.registerHelper(arguments[1],arguments[2]);break;case"add":var c=arguments[1],h=arguments[2];console.log("h.add",c),l[c]=Handlebars.compile(h);break;case"has":var c=arguments[1],o=!!l.hasOwnProperty(c);return console.log("h.has",c,o),o;case"cache":return l;default:throw"invalid action specified to jQuery.handlebars: "+arguments[0]}},e.fn.render=function(t,r,n){if(l.hasOwnProperty(t))this.html(l[t](r)).trigger("render.handlebars",[t,r]);else{if(i.sync)throw console.warn({msg:"template not in cache",tpl:t,cache:l,settings:i}),"jquery.handlerbars.sync: Template not in cache and sync = true: "+t;var s=a(t),c=this;e.get(s,function(e){c.html(""),l[t]=Handlebars.compile(e),c.html(l[t](r)).trigger("render.handlebars",[t,r]),"function"==typeof n&&n()},"text")}return this}})(jQuery);